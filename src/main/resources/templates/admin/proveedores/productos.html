<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Registrar Producto a Proveedor | Merko</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>

<header class="topbar">
    <div class="logo">Merko Admin</div>
    <nav>
        <form id="logoutForm" action="/logout" method="post" style="display:none;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>
        <a href="#" class="btn-logout"
           onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
            <i class="fas fa-sign-out-alt"></i> Salir
        </a>
    </nav>
</header>


<aside class="sidebar">
    <ul>
        <li><a href="/admin"><i class="fas fa-tachometer-alt"></i> Inicio</a></li>
        <li><a href="/admin/productos"><i class="fas fa-box"></i> Productos</a></li>
        <li><a href="/ventas"><i class="fas fa-shopping-cart"></i> Ventas</a></li>
        <li><a href="/ventas/nueva"><i class="fas fa-cart-plus"></i> Registrar Venta</a></li>
        <li><a href="/admin/compras/nueva"><i class="fas fa-truck"></i> Comprar Productos</a></li>
        <li><a href="/admin/proveedores/nuevo"><i class="fas fa-user-plus"></i> Registrar Proveedor</a></li>
        <li><a href="/admin/proveedores/nuevoo"><i class="fas fa-plus-square"></i> Producto a Proveedor</a></li>
    </ul>
</aside>

<main class="content">
    <h1>Registrar Producto a Proveedor Existente</h1>

    <form th:action="@{/admin/proveedores/agregar-producto}" method="post" class="form-admin proveedor-form" novalidate>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <!-- Selección de Proveedor -->
        <fieldset class="form-section">
            <legend>Seleccionar Proveedor</legend>
            <div class="form-group">
                <label for="proveedorId">Proveedor:</label>
                <select id="proveedorId" name="proveedorId" required aria-required="true" aria-label="Seleccionar proveedor">
                    <option value="" disabled selected>-- Seleccione un proveedor --</option>
                    <option th:each="prov : ${proveedores}"
                            th:value="${prov.id}"
                            th:text="${prov.nombre}"></option>
                </select>
            </div>
        </fieldset>

        <!-- Datos del Producto -->
        <fieldset class="form-section">
            <legend>Datos del Producto</legend>
            <div class="form-group">
                <label for="nombre">Nombre del Producto:</label>
                <input type="text" id="nombre" name="nombre" required aria-required="true" aria-label="Nombre del producto" />
            </div>

            <div class="form-group">
                <label for="descripcion">Descripción:</label>
                <input type="text" id="descripcion" name="descripcion" aria-label="Descripción del producto" />
            </div>

            <div class="form-group">
                <label for="precioCompra">Precio de Compra:</label>
                <input type="number" id="precioCompra" name="precioCompra" step="0.01" min="0" required aria-required="true" aria-label="Precio de compra" />
            </div>

            <div class="form-group">
                <label for="precioVenta">Precio de Venta:</label>
                <input type="number" id="precioVenta" name="precioVenta" step="0.01" min="0" required aria-required="true" aria-label="Precio de venta" />
            </div>

            <div class="form-group">
                <label for="stock">Stock Inicial:</label>
                <input type="number" id="stock" name="stock" min="0" required aria-required="true" aria-label="Stock inicial" />
            </div>
        </fieldset>

        <!-- Botones alineados -->
        <div class="form-actions botones-flex">
            <button type="submit" class="btn-form">
                <i class="fas fa-plus-circle"></i> Registrar Producto
            </button>
            <a th:href="@{/admin/productos}" class="btn-form cancelar">
                <i class="fas fa-times-circle"></i> Cancelar
            </a>
        </div>

        <!-- Mensaje de Error -->
        <div th:if="${param.error}">
            <p class="error-message" role="alert">Error al registrar el producto para el proveedor.</p>
        </div>

    </form>
</main>

</body>
</html>
